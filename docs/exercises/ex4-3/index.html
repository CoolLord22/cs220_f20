<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Exercise 4-3 |  </title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Exercise 4-3 |  "><meta data-react-helmet="true" name="description" content="This is an in-class exercise. An exercise page like this one will contain a brief description but is intended to be supplemented by discussion during our meeting time. Complete the exercise to the best of your ability in the time given. Feel free to talk with other students as you work, and do not be afraid to ask questions if you get stuck. Aim to complete as much as possible during our meeting, but you need not hand it in. You are encouraged to work at home to complete what you do not get through today."><meta data-react-helmet="true" property="og:description" content="This is an in-class exercise. An exercise page like this one will contain a brief description but is intended to be supplemented by discussion during our meeting time. Complete the exercise to the best of your ability in the time given. Feel free to talk with other students as you work, and do not be afraid to ask questions if you get stuck. Aim to complete as much as possible during our meeting, but you need not hand it in. You are encouraged to work at home to complete what you do not get through today."><meta data-react-helmet="true" property="og:url" content="https://jhu-ip.github.io/cs220_f20/docs/exercises/ex4-3"><link data-react-helmet="true" rel="shortcut icon" href="/cs220_f20/img/logo_cpp.svg"><link data-react-helmet="true" rel="canonical" href="https://jhu-ip.github.io/cs220_f20/docs/exercises/ex4-3"><link rel="stylesheet" href="/cs220_f20/styles.0187c458.css">
<link rel="preload" href="/cs220_f20/styles.b36abed8.js" as="script">
<link rel="preload" href="/cs220_f20/runtime~main.015c5d8c.js" as="script">
<link rel="preload" href="/cs220_f20/main.96d07cb6.js" as="script">
<link rel="preload" href="/cs220_f20/1.27c65ad5.js" as="script">
<link rel="preload" href="/cs220_f20/2.3388499d.js" as="script">
<link rel="preload" href="/cs220_f20/101.99288db1.js" as="script">
<link rel="preload" href="/cs220_f20/102.86f73d0f.js" as="script">
<link rel="preload" href="/cs220_f20/553cdf52.da30f551.js" as="script">
<link rel="preload" href="/cs220_f20/17896441.9400afa1.js" as="script">
<link rel="preload" href="/cs220_f20/4799cb1b.01f08c38.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_3046"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/cs220_f20/"><img class="navbar__logo" src="/cs220_f20/img/logo_cpp.svg" alt="CS220"><strong class="navbar__title">CS220</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs220_f20/docs/">Syllabus</a><a class="navbar__item navbar__link" href="/cs220_f20/staff/">Course Staff</a><a class="navbar__item navbar__link" href="/cs220_f20/schedule/">Course Material</a><a href="https://docs.google.com/spreadsheets/d/1xNTycMZqP_HEnL955EVIrTZS1rHpmjzirkdbwNYWkJo/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">CA Office Hours</a><a class="navbar__item navbar__link" href="/cs220_f20/exercise/">Exercises</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Homeworks</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/cs220_f20/docs/hw/hw0">Homework 0</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/docs/hw/hw1">Homework 1</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/docs/hw/hw2">Homework 2</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/docs/hw/hw3">Homework 3</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/hw/hw4">Homework 4</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/hw/hw5">Homework 5</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/hw/hw6">Homework 6</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/hw/hw7">Homework 7</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Projects</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/cs220_f20/projects/midterm_proj">Midterm Project</a></li><li><a class="dropdown__link" position="left" href="/cs220_f20/projects/final_proj">Final Project</a></li></ul></div><a class="navbar__item navbar__link" href="/cs220_f20/exams">Exams Resources</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cs220_f20/"><img class="navbar__logo" src="/cs220_f20/img/logo_cpp.svg" alt="CS220"><strong class="navbar__title">CS220</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/cs220_f20/docs/">Syllabus</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220_f20/staff/">Course Staff</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220_f20/schedule/">Course Material</a></li><li class="menu__list-item"><a href="https://docs.google.com/spreadsheets/d/1xNTycMZqP_HEnL955EVIrTZS1rHpmjzirkdbwNYWkJo/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="menu__link">CA Office Hours</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220_f20/exercise/">Exercises</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Homeworks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/docs/hw/hw0">Homework 0</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/docs/hw/hw1">Homework 1</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/docs/hw/hw2">Homework 2</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/docs/hw/hw3">Homework 3</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/hw/hw4">Homework 4</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/hw/hw5">Homework 5</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/hw/hw6">Homework 6</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/hw/hw7">Homework 7</a></li></ul></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Projects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/projects/midterm_proj">Midterm Project</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/cs220_f20/projects/final_proj">Final Project</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/cs220_f20/exams">Exams Resources</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Exercise 4-3</h1></header><div class="markdown"><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This is an in-class exercise. An exercise page like this one will contain a brief description but is intended to be supplemented by discussion during our meeting time. Complete the exercise to the best of your ability in the time given. Feel free to talk with other students as you work, and do not be afraid to ask questions if you get stuck. Aim to complete as much as possible during our meeting, but you need not hand it in. You are encouraged to work at home to complete what you do not get through today.</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Learning Objectives</h5></div><div class="admonition-content"><ul><li>gain practice creating complex structs</li><li>utilize structs with functions, structs, and arrays, and structs and pointers</li><li>malloc and free</li><li>review scanf/printf</li></ul></div></div><h3 id="part-1">Part 1</h3><p>Pull the starter code for this exercise from the public repo by taking the following steps:</p><ol><li><p>Log into ugrad, then navigate into <code>cs220-f20-public</code>, type <code>git status</code> and confirm you have not modified any files or accidentally committed to the public repo. Ask for help if you have added or committed files there and need to undo.</p></li><li><p>Type <code>git pull</code> to synchronize your local repo and working copy with the remote repo.</p></li><li><p>Confirm that you can see the template files for today‚Äôs exercise by typing <code>ls exercises/ex4-3</code> -- you should see files named <code>main.c</code>, <code>soccer.c</code>, <code>soccer.h</code>, and <code>Makefile</code> inside.</p></li><li><p>Copy <code>main.c</code>, <code>soccer.c</code>, <code>soccer.h</code>, and <code>Makefile</code> from the public class repository (in the <em>/exercises/ex4-3/</em> directory) to your personal repo in a new directory named <code>ex4-3</code> under <code>~/cs220/exercises/</code>.</p></li></ol><h3 id="part-2">Part 2</h3><p>Open <code>soccer.h</code> with a text editor. In this file you will find headers for three functions. In this part you need to create struct types to contain information about a soccer ‚ÄúPlayer‚Äù; the ‚ÄúDate‚Äù shows the date the player was signed into a team and ‚ÄúStat‚Äù stores basic statistics of a player in a game. Note functions declarations are already there. You must define the following struct types (green bold shows struct type names and bulleted items are the struct members) before the function headers: </p><p><code>Stat</code> </p><ul><li><code>int</code> num_of_goals scored</li><li><code>int</code> num_of_assists</li><li><code>float</code> pass_accuracy</li><li><code>int</code> min_played</li><li><code>int</code> num_of_shots</li><li><code>float</code> shot_accuracy</li></ul><p><code>Date</code></p><ul><li><code>int</code> day</li><li><code>int</code> month</li><li><code>int</code> year</li></ul><p><code>Player</code></p><ul><li><code>int</code> age</li><li><code>int</code> jersey_number</li><li><code>bool</code> goalkeeper</li><li><code>Date</code> date  (pointer to a Date struct defined on the heap)</li><li><code>Stat</code> stat  (pointer to a Stat struct defined on the heap)</li></ul><h3 id="part-3">Part 3</h3><p>Once you are finished defining the struct types in the header file, you may switch to <code>soccer.c</code>. There are a few functions in this file, namely <em>create_team</em>, <em>create_player</em>, and <em>print_team</em>. All of those are fully implemented. You may review the implementation of these functions and make sure you understand them.</p><h3 id="part-4">Part 4</h3><p>Now switch to <code>main.c</code>. There are a few things you need to do here. First, you should read information from the input using <em>scanf</em> to create a stat structure. Note that this stat struct is dynamically defined on the heap and <em>new_stat</em> points to it. Then, you need to find the player with the latest signed date in the array ‚Äúteam‚Äù. If there are multiple players with the same signed date, you would select the one with smallest index in the array. Finally, you update the stat of the player at the index you found with <em>new_stat</em>. Once finished, you may produce an executable by running ‚Äúmake‚Äù and run the executable by typing <em>./main</em>. Check if your code works as expected (i.e., the player‚Äôs stats with most recent signed date gets updated properly). </p><h3 id="part-5">Part 5</h3><p>Note the use of <code>-g</code> in the make file, which enables debugging.  Now, run the program using valgrind:</p><pre><code class="language-bash">valgrind  --leak-check=full  ./main
</code></pre><p>As you can see, we have calls to malloc in main and <code>soccer.c</code>, but not enough calls to free; there is only one call to free as a helper for you in <code>main.c</code>. You need to free stat and date structs on the heap for all the players in the team. Read the valgrind output and make modifications to <code>main.c</code> to fix the errors/memory leaks.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/exercises/ex4-3.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#part-1" class="table-of-contents__link">Part 1</a></li><li><a href="#part-2" class="table-of-contents__link">Part 2</a></li><li><a href="#part-3" class="table-of-contents__link">Part 3</a></li><li><a href="#part-4" class="table-of-contents__link">Part 4</a></li><li><a href="#part-5" class="table-of-contents__link">Part 5</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/cs220_f20/styles.b36abed8.js"></script>
<script src="/cs220_f20/runtime~main.015c5d8c.js"></script>
<script src="/cs220_f20/main.96d07cb6.js"></script>
<script src="/cs220_f20/1.27c65ad5.js"></script>
<script src="/cs220_f20/2.3388499d.js"></script>
<script src="/cs220_f20/101.99288db1.js"></script>
<script src="/cs220_f20/102.86f73d0f.js"></script>
<script src="/cs220_f20/553cdf52.da30f551.js"></script>
<script src="/cs220_f20/17896441.9400afa1.js"></script>
<script src="/cs220_f20/4799cb1b.01f08c38.js"></script>
</body>
</html>